Microcontrollers - BCS402

Figure 9 shows a block diagram of an ARM940T cache. The cache controller uses the address

tag as the input to the CAM and the output selects the way containing the valid cache line.

The tag portion of the requested address is used as an input to the four CAMs that
simultaneously compare the input tag with all cache-tags stored in the 64 ways. If there is a

match, cache data is provided by the cache memory. If no match occurs, a miss

ignal is

generated by the memory controller.

The controller enables one of four CAMs using the set index bits. The indexed CAM then selects

a cache line in cache memory and the data index portion of the core address selects the requested

word, half word, or byte within the cache line.

2.5 Write Buffer

A write buffer is a very small, fast FIFO memory buffer that temporarily holds data that the
processor would normally write to main memory. In a system without a write buffer, the
processor writes directly to main memory. In a system with a write buffer, data is written at high
speed to the FIFO and then emptied to slower main memory. The write buffer reduces the
processor time taken to write small blocks of sequential data to main memory. The FIFO
memory of the write buffer is at the same level in the memory hierarchy as the L1 cache and is

shown in memory hierarchy.

The efficiency of the write buffer depends on the ratio of main memory writes to the number of
instructions executed. Over a given time interval, if the number of writes to main memory is low
or sufficiently spaced between other processing instructions, the write buffer will rarely fill. If
the write buffer does not fill, the running program continues to execute out of cache memory
using registers for processing, cache memory for reads and writes, and the write buffer for

holding evicted cache lines while they drain to main memory.

A write buffer also improves cache performance; the improvement occurs during cache line
evictions. If the cache controller evicts a dirty cache line, it writes the cache line to the write
buffer instead of main memory. Thus the new cache line data will be available sooner, and the

processor can continue operating from cache memory.

Dept. of ECE, GSSSIETW, Mysuru Page 41