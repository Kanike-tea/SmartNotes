Microcontrollers-BCS402

3. Current Program Status Register

+ Flags Status Extension Control

Fields + = 4 tt tt 1
Bit 31302928 7654 0

1] I|F\T| Mode
Function. ——— =)
Condition Interrupt | Processor

flags Masks mode

Thumb

state

Fig 3: Program Status Register

The ARM core uses the cpsr to monitor and control internal operations. The cpsr is a
dedicated 32-bit register and resides in the register file. Figure 3 shows the basic layout of a
generic program status register.

The epsr is divided into four fields, each 8 bits wide: flags, status, extension, and control. In
current designs the extension and status fields are reserved for future use. The control field
contains the processor mode, state, and interrupts mask bits. The flags field contains the
condition flags. Some ARM processor cores have extra bits allocated. For example, the J bit,
which can be found in the flags field, is only available on Jazelle-enabled processors, which

execute 8-bit instructions.

Processor Mode:

The processor mode determines which registers are active and the access rights to the cpsr
register itself. Each processor mode is either privileged or non-privileged: A privileged mode
allows full read-write access to the cpsr. Conversely, a non-privileged mode only allows read
access to the control field in the cpsr but still allows read-write access to the condition flags.
There are seven processor modes in total: six privileged modes (abort, fast interrupt request,

interrupt request, supervisor , system, and undefined) and one non-privileged mode (user).

The processor enters abort mode when there is a failed attempt to access memory. Fast
interrupt request and interrupt request modes correspond to the two interrupt levels available

on the ARM processor. Supervisor mode is the mode that the processor is in after reset and is

generally the mode that an operating system kernel operates in. System mode is a special

version of user mode that allows full read-write access to the cpsr. Undefined mode is used

Dept. of ECE, GSSSIETW Page 18