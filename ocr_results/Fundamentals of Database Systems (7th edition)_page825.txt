21.3 Multiversion Concurrency Control Techniques

To implement this algorithm, it is necessary to simulate the locking of an item X that
has been written by transaction T’ until T’ is either committed or aborted. This
algorithm does not cause deadlock, since T waits for T’ only if TS(T) > TS(T’).

Thomas’s Write Rule. A modification of the basic TO algorithm, known as
Thomas’s write rule, does not enforce conflict serializability, but it rejects fewer
write operations by modifying the checks for the write_item(X) operation as follows:

1. If read_TS(X) > TS(T), then abort and roll back T and reject the operation.

2. If write_TS(X) > TS(7), then do not execute the write operation but continue
processing. This is because some transaction with timestamp greater than
TS(T)—and hence after T in the timestamp ordering—has already written
the value of X. Thus, we must ignore the write_item(X) operation of T because
it is already outdated and obsolete. Notice that any conflict arising from this
situation would be detected by case (1).

3. If neither the condition in part (1) nor the condition in part (2) occurs, then
execute the write_item(X) operation of T and set write_TS(X) to TS(T).

21.3 Multiversion Concurrency
Control Techniques

These protocols for concurrency control keep copies of the old values of a data item
when the item is updated (written); they are known as multiversion concurrency
control because several versions (values) of an item are kept by the system. When a
transaction requests to read an item, the appropriate version is chosen to maintain
the serializability of the currently executing schedule. One reason for keeping mul-
tiple versions is that some read operations that would be rejected in other tech-
niques can still be accepted by reading an older version of the item to maintain
serializability. When a transaction writes an item, it writes a new version and the old
version(s) of the item is retained. Some multiversion concurrency control algo-
rithms use the concept of view serializability rather than conflict serializability.

An obvious drawback of multiversion techniques is that more storage is needed to
maintain multiple versions of the database items. In some cases, older versions can
be kept in a temporary store. It is also possible that older versions may have to be
maintained anyway—for example, for recovery purposes. Some database applica-
tions may require older versions to be kept to maintain a history of the changes of
data item values. The extreme case is a temporal database (see Section 26.2), which
keeps track of all changes and the times at which they occurred. In such cases, there
is no additional storage penalty for multiversion techniques, since older versions
are already maintained.

Several multiversion concurrency control schemes have been proposed. We dis-
cuss two schemes here, one based on timestamp ordering and the other based on
2PL. In addition, the validation concurrency control method (see Section 21.4)
also maintains multiple versions, and the snapshot isolation technique used in

795