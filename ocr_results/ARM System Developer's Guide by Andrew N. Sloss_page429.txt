416 Chapter 12. Caches

Address issued Cache Cache
by processor core controller memory
31-45 Miss
[a3
\ 3,
Tag my, 64 ways
KS
%,
Gp Address/data
§ + bus
CAM Cama [Cache-tag |v ]d Data i.
4 cache
|_| set Cam? [Cache-tag [v[d Data line ner
Set [7] select Caml [Cache-tag [vd Data wa
index logic Camo [Cachetag |v fd Data y
tH ——__,—_
Data |
index
old

Figure 12.9 ARM940T—4 KB 64-way set associative D-cache using a CAM.

The tag portion of the requested address is used as an input to the four CAMs that
simultaneously compare the input tag with all cache-tags stored in the 64 ways. If there is
a match, cache data is provided by the cache memory. If no match occurs, a miss signal is
generated by the memory controller.

The controller enables one of four CAMs using the set index bits. The indexed CAM
then selects a cache line in cache memory and the data index portion of the core address
selects the requested word, halfword, or byte within the cache line.

12.2.5 WRITE BUFFERS

A write buffer is a very small, fast FIFO memory buffer that temporarily holds data that the
processor would normally write to main memory. In a system without a write buffer, the
processor writes directly to main memory. Ina system with a write buffer, data is written at
high speed to the FIFO and then emptied to slower main memory. The write buffer reduces
the processor time taken to write small blocks of sequential data to main memory. The
FIFO memory of the write buffer is at the same level in the memory hierarchy as the L1
cache and is shown in Figure 12.1.