viii Contents

CHAPTER

11

CHAPTER

12

CHAPTER

13

CHAPTER

14

EMBEDDED OPERATING SYSTEMS 381
11.1 Fundamental Components 381
11.2. Example: Simple Little Operating System 383
11.3 Summary 400
CACHES 403
12.1 The Memory Hierarchy and Cache Memory 404
12.2. Cache Architecture 408
12.3. Cache Policy 418
12.4 Coprocessor 15 and Caches 423
12.5 Flushing and Cleaning Cache Memory 423
12.6 Cache Lockdown 443
12.7. Caches and Software Performance 456
12.8 Summary 457
MEMORY PROTECTION UNITS 461
13.1 Protected Regions 463
13.2 Initializing the MPU, Caches, and Write Buffer 465
13.3. Demonstration of an MPU system 478
13.4 Summary 487
MEMORY MANAGEMENT UNITS. 491
14.1 Moving from an MPU to an MMU 492
14.2 How Virtual Memory Works 493
14.3. Details of the ARM MMU 501
14.4 Page Tables 501
14.5 The Translation Lookaside Buffer 506
14.6 Domains and Memory Access Permission 510
14.7. The Caches and Write Buffer 512
14.8 Coprocessor 15 and MMU Configuration 513
14.9 The Fast Context Switch Extension 515
14.10 Demonstration: A Small Virtual Memory System 520
14.11 The Demonstration as mmuSLOS 545
14.12 Summary 545