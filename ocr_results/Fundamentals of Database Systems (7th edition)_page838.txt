808

Chapter 21 Concurrency Control Techniques

their better recoverability properties. We introduced the concepts of shared (read)
and exclusive (write) locks (Section 21.1.1) and showed how locking can guarantee
serializability when used in conjunction with the two-phase locking rule. We also
presented various techniques for dealing with the deadlock problem in Sec-
tion 21.1.3, which can occur with locking. In practice, it is common to use time-
outs and deadlock detection (wait-for graphs). Deadlock prevention protocols,
such as no waiting and cautious waiting, can also be used.

We then presented other concurrency control protocols. These include the time-
stamp ordering protocol (Section 21.2), which ensures serializability based on the
order of transaction timestamps. Timestamps are unique, system-generated trans-
action identifiers. We discussed Thomasâ€™s write rule, which improves performance
but does not guarantee serializability. The strict timestamp ordering protocol was
also presented. We discussed two multiversion protocols (Section 21.3), which
assume that older versions of data items can be kept in the database. One tech-
nique, called multiversion two-phase locking (which has been used in practice),
assumes that two versions can exist for an item and attempts to increase concur-
rency by making write and read locks compatible (at the cost of introducing an
additional certify lock mode). We also presented a multiversion protocol based on
timestamp ordering. In Section 21.4.1, we presented an example of an optimistic
protocol, which is also known as a certification or validation protocol.

We then discussed concurrency control methods that are based on the concept of
snapshot isolation in Section 21.4.2; these are used in several DBMSs because of
their lower overhead. The basic snapshot isolation method can allow nonserializ-
able schedules in rare cases because of certain anomalies that are difficult to detect;
these anomalies may cause a corrupted database. A variation known as serializable
snapshot isolation has been recently developed and ensures serializable schedules.

Then in Section 21.5 we turned our attention to the important practical issue of
data item granularity. We described a multigranularity locking protocol that
allows the change of granularity (item size) based on the current transaction
mix, with the goal of improving the performance of concurrency control. An
important practical issue was then presented in Section 21.6, which is to develop
locking protocols for indexes so that indexes do not become a hindrance to con-
current access. Finally, in Section 21.7, we introduced the phantom problem and
problems with interactive transactions, and we briefly described the concept of
latches and how this concept differs from locks.

Review Questions
21.1. What is the two-phase locking protocol? How does it guarantee serializability?

21.2. What are some variations of the two-phase locking protocol? Why is strict
or rigorous two-phase locking often preferred?

21.3. Discuss the problems of deadlock and starvation, and the different
approaches to dealing with these problems.