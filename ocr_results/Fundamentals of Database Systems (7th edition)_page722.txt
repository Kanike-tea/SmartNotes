692

Chapter 19 Query Optimization

query optimization. Section 19.8 is devoted to a discussion of query optimization in
data warehouses. Section 19.9 gives an overview of query optimization in Oracle.
Section 19.10 briefly discusses semantic query optimization. We end the chapter
with a summary in Section 19.11.

19.1 Query Trees and Heuristics
for Query Optimization

In this section, we discuss optimization techniques that apply heuristic rules to modify
the internal representation of a query—which is usually in the form of a query tree or a
query graph data structure—to improve its expected performance. The scanner and
parser of an SQL query first generate a data structure that corresponds to an initial
query representation, which is then optimized according to heuristic rules. This leads
to an optimized query representation, which corresponds to the query execution strat-
egy. Following that, a query execution plan is generated to execute groups of opera-
tions based on the access paths available on the files involved in the query.

One of the main heuristic rules is to apply SELECT and PROJECT operations before
applying the JOIN or other binary operations, because the size of the file resulting
from a binary operation—such as JOIN—is usually a multiplicative function of the
sizes of the input files. The SELECT and PROJECT operations reduce the size of a file
and hence should be applied before a join or other binary operation.

In Section 19.1.1, we reiterate the query tree and query graph notations that we
introduced earlier in the context of relational algebra and calculus in Sections 8.3.5
and 8.6.5, respectively. These can be used as the basis for the data structures that are
used for internal representation of queries. A query tree is used to represent a rela-
tional algebra or extended relational algebra expression, whereas a query graph is
used to represent a relational calculus expression. Then, in Section 19.1.2, we show
how heuristic optimization rules are applied to convert an initial query tree into an
equivalent query tree, which represents a different relational algebra expression
that is more efficient to execute but gives the same result as the original tree. We
also discuss the equivalence of various relational algebra expressions. Finally, Sec-
tion 19.1.3 discusses the generation of query execution plans.

19.1.1 Notation for Query Trees and Query Graphs

A query tree is a tree data structure that corresponds to an extended relational alge-
bra expression. It represents the input relations of the query as leaf nodes of the tree,
and it represents the relational algebra operations as internal nodes. An execution of
the query tree consists of executing an internal node operation whenever its operands
are available and then replacing that internal node by the relation that results from
executing the operation. The order of execution of operations starts at the leaf nodes,
which represents the input database relations for the query, and ends at the root node,
which represents the final operation of the query. The execution terminates when the
root node operation is executed and produces the result relation for the query.