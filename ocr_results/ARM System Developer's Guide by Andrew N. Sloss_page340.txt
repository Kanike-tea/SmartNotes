Figure 9.4

EXAMPLE

Figure 9.5

9.2 Interrupts 327

nzcvgjlft_irq

spsr_irq=cpsr

user mode tidiirqepe
code pe=0x18

Return to

Y
Software
handler

Interrupt Request (IRQ).

Register r14_irq is assigned the value of the pc when the interrupt was raised. The pc is
then set to the IRQ entry +0x18 in the vector table.

In state 3 the software handler takes over and calls the appropriate interrupt service
routine to service the source of the interrupt. Upon completion, the processor mode reverts
back to the original user mode code in state 1.

Figure 9.5 shows an example of an FIQ exception. The processor goes through a similar
procedure as with the IRQ exception, but instead of just masking further IRQ exceptions
from occurring, the processor also masks out further FIQ exceptions. This means that both
interrupts are disabled when entering the software handler in state 3.

FIQ

nzcvqjIFt_fiq
spsr_figq=cpsr
user mode ridifiqepe
code pc=0x1c

Return to

y
Software
handler

Fast Interrupt Request (FIQ).